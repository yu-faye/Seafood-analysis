{
  "name": "GFWEventsAPI",
  "properties": {
    "type": "RestResource",
    "typeProperties": {
      "relativeUrl": "/v3/events/stats",
      "requestMethod": "POST",
      "additionalHeaders": {
        "Authorization": {
          "value": "@concat('Bearer ', parameters().gfwApiToken)",
          "type": "Expression"
        },
        "Accept": "application/json",
        "Content-Type": "application/json"
      },
      "requestBody": {
        "confidences": ["3", "4"],
        "datasets": ["public-global-port-visits-events:latest"],
        "startDate": "@formatDateTime(addDays(utcnow(), -30), 'yyyy-MM-dd')",
        "endDate": "@formatDateTime(utcnow(), 'yyyy-MM-dd')",
        "timeseriesInterval": "DAY"
      }
    },
    "linkedServiceName": {
      "referenceName": "GlobalFishingWatchAPI",
      "type": "LinkedServiceReference"
    },
    "parameters": {
      "gfwApiToken": {
        "type": "string"
      }
    },
    "description": "Global Fishing Watch Events API dataset"
  }
}
